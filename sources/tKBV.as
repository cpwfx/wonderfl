"package \n{\n\t\n\t/**\n\t * \n\t * @author Takashi Murai(KAYAC)\n\t */\n\t \n\timport flash.display.*\n\timport flash.events.*\n\timport flash.text.*\n\timport flash.filters.*;\n\timport flash.geom.*;\n\timport flash.utils.*\n\t\n\tpublic class WonderFL extends MovieClip\n\t{\n\t\t//\n\t\tvar Layer:Sprite=new Sprite()\n\t\tvar drawPos:Sprite=new Sprite()\n\t\tvar textPos:Sprite=new Sprite()\n\t\t\n\t\tvar txtFmt:TextFormat = new TextFormat();\n\t\tvar textFields:TextField=new TextField()\n\t\t\n\t\t//message\n\t\tvar mes1=\"hello world\"\n\t\tvar mes2=\"it's wonderFL world.\"\n\t\t\n\t\t//lleasures\n\t\tvar posX:Number = stage.stageWidth / 2;  \n\t\tvar posY:Number = stage.stageHeight /2;  \n\t\tvar disX:Number = Math.random()*30  \n\t\tvar disY:Number = Math.random()*20\n\t\tvar deg:Number = Math.random()*360  \n\t\tvar count:Number = 0;  \n\t\tvar step:Number =64\n\t\tvar cx:Number = stage.stageWidth /2;  \n\t\tvar cy:Number = stage.stageHeight /2;   \n\t\tvar xPos:Number = posX * Math.sin(disX * count + deg) + cx;  \n\t\tvar yPos:Number = posY * Math.sin(disY * count) + cy; \n\t\t\n\t\t//gladationLine\n\t\tvar mtx:Matrix = new Matrix();\n\t\tvar gradCount=1\n\t\tvar gradDir=1\n\t\tvar life=0\n\t\tvar lifeLmt=200\n\t\t\n\t\t//fader\n\t\tvar blurVall=4\n\t\tvar _bd:BitmapData\n\t\tvar _bmp:Bitmap\n\t\tvar _blurF:BlurFilter\n\t\t\n\t\tpublic function WonderFL() { \n\t\t\tinitFader()\n\t\t\tsetMessage(mes1,\"normal\",0xFF0000)\n\t\t\t\n\t\t\tvar phase1:Timer = new Timer(3000, 1);\n\t\t\tphase1.addEventListener(TimerEvent.TIMER_COMPLETE, function(e:Event){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t \tsetMessage(\"\",\"normal\",0xFFFFFF)\n\t\t\t});\n\t\t\tphase1.start(); \n\t\t\t\n\t\t\tvar phase2:Timer = new Timer(6000, 1);\n\t\t\tphase2.addEventListener(TimerEvent.TIMER_COMPLETE, function(e:Event){\n\t\t\t\tsetMessage(mes2,\"screen\",0xFFFFFF)\n\t\t\t\tinitLissajous()\n\t\t\t});\n\t\t\tphase2.start(); \n\t\t\t\n\t\t\tthis.addChild(_bmp)\n\t\t\tLayer.addChild(drawPos)\n\t\t\tLayer.addChild(textPos)\n\t\t\ttextPos.addChild(textFields)\n\t\t}\n\t\t\n\t\tfunction setMessage(mes:String,blend:String,hex:Number){\n\t\t\ttxtFmt.size = 40\n\t\t\ttxtFmt.font=\"Arial\"\n\t\t\ttxtFmt.align = TextFormatAlign.CENTER;\n\t\t\ttxtFmt.color=hex\n\t\t\t\n\t\t\ttextFields.defaultTextFormat = txtFmt;\n\t\t\ttextFields.autoSize=TextFieldAutoSize.LEFT\n\t\t\ttextFields.x =0\n\t\t\ttextFields.y = 0\n\t\t\ttextFields.text=mes\n\t\t\t\n\t\t\ttextPos.alpha=0.5\n\t\t\ttextPos.blendMode=blend\n\t\t\t\n\t\t\ttextPos.x=stage.stageWidth/2-textFields.width/2\n\t\t\ttextPos.y=stage.stageHeight/2-textFields.height/2\n\t\t}\n\n\t\tfunction initFader(){\n\t\t\t_bd=new BitmapData(stage.stageWidth,stage.stageHeight,true,0x000000);\n\t\t\t_bmp=new  Bitmap(_bd);\n\t\t\t_blurF=new BlurFilter(blurVall,blurVall,3);\n\t\t\t\n\t\t\t stage.addEventListener(Event.ENTER_FRAME, function(e:Event){\n\t\t\t\trender()\n\t\t\t});  \n\t\t}\n\t\t\n\t\tfunction render():void {\n\t\t\t_bd.colorTransform(_bd.rect, new ColorTransform(1, 1, 1,0.999, 0, 0, 0, 0));\n\t\t\t_bd.applyFilter(_bd,_bd.rect,new Point(0,0),_blurF);\n\t\t\t_bd.draw(Layer);\n\t\t}\n\t\t\n\t\tfunction initLissajous(){\n\t\t\tmtx.createGradientBox(400, 400, 0, 0, 0);\n\t\t\tdrawPos.graphics.lineStyle(1);  \n\t\t \tdrawPos.graphics.lineGradientStyle(GradientType.LINEAR,  [0xFF0000, 0x0000FF], [0.5,0.5],[gradCount,255-gradCount], mtx, SpreadMethod.REFLECT);\n\t\t\tdrawPos.graphics.moveTo(xPos,yPos);  \n\t\t\t \n\t\t\t stage.addEventListener(Event.ENTER_FRAME, function(e:Event){\n\t\t\t\tdrawLissajous()\n\t\t\t});  \n\t\t}\n\t\t\n\t\t function drawLissajous():void {\n\t\t\t count+= step;  \n\t\t\t xPos = posX * Math.sin(disX * count + deg) + cx;  \n\t\t\t yPos = posY * Math.sin(disY * count) + cy;  \n\t\t\t if(gradCount>=255 || 0>=gradCount){\n\t\t\t\tgradDir*=-1\n\t\t\t}\n\t\t\tgradCount+=gradDir\n\t\t\tlife=life>lifeLmt?0:life+1\n\t\t\tif (life>lifeLmt) {\n\t\t\t\tdrawPos.graphics.clear()\n\t\t\t\tdrawPos.graphics.lineStyle(0.5);  \n\t\t\t\tdrawPos.graphics.moveTo(xPos,yPos)\n\t\t\t}\n\n\t\t\tdrawPos.graphics.lineGradientStyle(GradientType.LINEAR,  [0xFF0000, 0xFF0000], [(gradCount/255),((255-gradCount)/255)],[0,255], mtx, SpreadMethod.REFLECT);\n\t\t\tdrawPos.graphics.lineTo(xPos,yPos);  \n\t\t}\n\t}\n}\n\n"